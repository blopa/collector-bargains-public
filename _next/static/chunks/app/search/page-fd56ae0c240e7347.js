(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{17809:()=>{},70343:(e,s,a)=>{Promise.resolve().then(a.bind(a,11393))},97301:(e,s,a)=>{"use strict";a.d(s,{X:()=>c});var r=a(95155),t=a(12115),l=a(5565),i=a(29602);let c=(0,t.memo)(function(e){let{product:s,width:a=600,height:c=600,className:n}=e,d=s.image,o="/products/".concat(s.id,"/image.jpg"),m="/placeholder.svg",u=[...d?[d]:[],o,m],[h,x]=(0,t.useState)(u),[f,p]=(0,t.useState)(0);(0,t.useEffect)(()=>{let e=!0;return(0,i.jt)("images/".concat(s.id),"images/".concat(s.id)).then(s=>{e&&(x([...d?[d]:[],o,...(Array.isArray(s.data)?s.data:[]).sort((e,s)=>{var a,r;return(null!==(a=e.order)&&void 0!==a?a:0)-(null!==(r=s.order)&&void 0!==r?r:0)}).map(e=>e.url),m]),p(0))}).catch(()=>{}),()=>{e=!1}},[s.id,d,o,m]);let g=h[f];return(0,r.jsx)(l.default,{src:g,alt:s.name,width:a,height:c,className:n,onError:()=>{p(e=>e<h.length-1?e+1:e)},loading:"lazy"},g)})},50131:(e,s,a)=>{"use strict";a.d(s,{Ue:()=>o,Vp:()=>c,fL:()=>n,sQ:()=>m});var r=a(95155),t=a(47828),l=a(52107);function i(){return(0,r.jsxs)(l.Zp,{className:"h-full overflow-hidden border-2 border-transparent rounded-xl",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(t.E,{className:"w-full h-48"})}),(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(t.E,{className:"h-5 w-full"}),(0,r.jsx)(t.E,{className:"h-5 w-3/4"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t.E,{className:"h-6 w-20"}),(0,r.jsx)(t.E,{className:"h-4 w-16"})]}),(0,r.jsx)(t.E,{className:"h-4 w-32"})]})}),(0,r.jsxs)(l.wL,{className:"p-4 pt-0 flex justify-between items-center",children:[(0,r.jsx)(t.E,{className:"h-6 w-24 rounded-full"}),(0,r.jsx)(t.E,{className:"h-6 w-6 rounded-full"})]})]})}function c(e){let{count:s=8}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Array(s).fill(0).map((e,s)=>(0,r.jsx)(i,{},s))})}function n(){return(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[,,,,].fill(0).map((e,s)=>(0,r.jsx)(i,{},s))})}function d(){return(0,r.jsx)(l.Zp,{className:"h-full transition-all border-0 rounded-xl overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-center justify-center p-6 text-center",children:[(0,r.jsx)(t.E,{className:"h-16 w-16 rounded-full mb-3"}),(0,r.jsx)(t.E,{className:"h-5 w-24"})]})})}function o(){return(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:Array(8).fill(0).map((e,s)=>(0,r.jsx)(d,{},s))})}function m(){return(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[,,,].fill(0).map((e,s)=>(0,r.jsx)(l.Zp,{className:"h-full overflow-hidden border-2 border-transparent rounded-xl",children:(0,r.jsxs)(l.Wu,{className:"p-4 flex gap-4",children:[(0,r.jsx)(t.E,{className:"w-20 h-20 rounded flex-shrink-0"}),(0,r.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,r.jsx)(t.E,{className:"h-5 w-full"}),(0,r.jsx)(t.E,{className:"h-4 w-1/2"}),(0,r.jsx)(t.E,{className:"h-4 w-16"})]})]})},s))})}},97754:(e,s,a)=>{"use strict";a.d(s,{E:()=>c});var r=a(95155);a(12115);var t=a(31027),l=a(29602);let i=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)(i({variant:a}),s),...t})}},19393:(e,s,a)=>{"use strict";a.d(s,{$:()=>d});var r=a(95155),t=a(12115),l=a(12317),i=a(31027),c=a(29602);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:a,variant:t,size:i,asChild:d=!1,...o}=e,m=d?l.DX:"button";return(0,r.jsx)(m,{className:(0,c.cn)(n({variant:t,size:i,className:a})),ref:s,...o})});d.displayName="Button"},52107:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>n,Zp:()=>i,aR:()=>c,wL:()=>m});var r=a(95155),t=a(12115),l=a(29602);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});i.displayName="Card";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});c.displayName="CardHeader";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});n.displayName="CardTitle";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent";let m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})});m.displayName="CardFooter"},94698:(e,s,a)=>{"use strict";a.d(s,{CG:()=>o,Fm:()=>f,cj:()=>d,h:()=>x,qp:()=>p});var r=a(95155),t=a(12115),l=a(66217),i=a(31027),c=a(40767),n=a(29602);let d=l.bL,o=l.l9;l.bm;let m=l.ZL,u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s})});u.displayName=l.hJ.displayName;let h=(0,i.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=t.forwardRef((e,s)=>{let{side:a="right",className:t,children:i,...d}=e;return(0,r.jsxs)(m,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(l.UC,{ref:s,className:(0,n.cn)(h({side:a}),t),...d,children:[i,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let f=e=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};f.displayName="SheetHeader";let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold text-foreground",a),...t})});p.displayName=l.hE.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...t})}).displayName=l.VY.displayName},47828:(e,s,a)=>{"use strict";a.d(s,{E:()=>l});var r=a(95155),t=a(29602);function l(e){let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...a})}},83737:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var r=a(63626),t=a(29602),l=a(12115),i=a(41477);let c=()=>{var e;let{currentCurrency:s}=(0,r.H)(),{currentCountries:a}=(0,i.S)(),[c,n]=(0,l.useState)({}),d=(null===(e=a[0])||void 0===e?void 0:e.code)||"NL";(0,l.useEffect)(()=>{n({})},[s]);let o=(0,l.useCallback)(async e=>{if(!s||e.toLowerCase()===s.code.toLowerCase())return 1;try{var a;let r=await (0,t.$4)(e),l=null===(a=r[e.toLowerCase()])||void 0===a?void 0:a[s.code.toLowerCase()];if(void 0!==l)return n(s=>({...s,[e.toLowerCase()]:l})),l}catch(e){console.error("Failed to load conversion rate:",e)}return 1},[s]);return(0,l.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR",r=e;if(s&&a.toLowerCase()!==s.code.toLowerCase()){let l=c[a.toLowerCase()];if(void 0!==l)return r=e*l,(0,t.$g)(r,s.code,d);o(a)}return(0,t.$g)(e,a,d)},[c,d,s,o])}},11393:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var r=a(95155),t=a(12115),l=a(76046),i=a(48173),c=a.n(i),n=a(99053),d=a(20853),o=a(196),m=a(19393),u=a(52107),h=a(97754),x=a(63409),f=a(51719),p=a(91902),g=a(98867),j=a(29602);let N=x.bL;x.YJ;let v=x.WT,b=t.forwardRef((e,s)=>{let{className:a,children:t,...l}=e;return(0,r.jsxs)(x.l9,{ref:s,className:(0,j.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[t,(0,r.jsx)(x.In,{asChild:!0,children:(0,r.jsx)(f.A,{className:"h-4 w-4 opacity-50"})})]})});b.displayName=x.l9.displayName;let w=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(x.PP,{ref:s,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})});w.displayName=x.PP.displayName;let y=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(x.wn,{ref:s,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(f.A,{className:"h-4 w-4"})})});y.displayName=x.wn.displayName;let k=t.forwardRef((e,s)=>{let{className:a,children:t,position:l="popper",...i}=e;return(0,r.jsx)(x.ZL,{children:(0,r.jsxs)(x.UC,{ref:s,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(w,{}),(0,r.jsx)(x.LM,{className:(0,j.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(y,{})]})})});k.displayName=x.UC.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(x.JU,{ref:s,className:(0,j.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=x.JU.displayName;let P=t.forwardRef((e,s)=>{let{className:a,children:t,...l}=e;return(0,r.jsxs)(x.q7,{ref:s,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(x.VF,{children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})}),(0,r.jsx)(x.p4,{children:t})]})});P.displayName=x.q7.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(x.wv,{ref:s,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=x.wv.displayName;var E=a(86352);let S=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(E.bL,{ref:s,className:(0,j.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:(0,r.jsx)(E.C1,{className:(0,j.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})})});S.displayName=E.bL.displayName;var C=a(46195);let _=(0,a(31027).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(C.b,{ref:s,className:(0,j.cn)(_(),a),...t})});L.displayName=C.b.displayName;var R=a(5900);let F=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsxs)(R.bL,{ref:s,className:(0,j.cn)("relative flex w-full touch-none select-none items-center",a),...t,children:[(0,r.jsx)(R.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(R.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(R.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),(0,r.jsx)(R.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});F.displayName=R.bL.displayName;var A=a(94698),z=a(47828),V=a(50131);function M(){return(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)("div",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,r.jsxs)("div",{className:"sticky top-24 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(z.E,{className:"h-6 w-20"}),(0,r.jsx)(z.E,{className:"h-8 w-16"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z.E,{className:"h-5 w-24 mb-2"}),(0,r.jsxs)("div",{className:"px-2",children:[(0,r.jsx)(z.E,{className:"h-5 w-full mb-6"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(z.E,{className:"h-4 w-16 mb-1"}),(0,r.jsx)(z.E,{className:"h-5 w-12"})]}),(0,r.jsxs)("div",{className:"flex flex-col text-right",children:[(0,r.jsx)(z.E,{className:"h-4 w-16 mb-1"}),(0,r.jsx)(z.E,{className:"h-5 w-12"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z.E,{className:"h-5 w-24 mb-2"}),(0,r.jsx)("div",{className:"space-y-2",children:[,,,,,].fill(0).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z.E,{className:"h-4 w-4 rounded"}),(0,r.jsx)(z.E,{className:"h-4 w-24"})]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z.E,{className:"h-5 w-24 mb-2"}),(0,r.jsx)("div",{className:"space-y-2",children:[,,,,].fill(0).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z.E,{className:"h-4 w-4 rounded"}),(0,r.jsx)(z.E,{className:"h-4 w-24"})]},s))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z.E,{className:"h-4 w-4 rounded"}),(0,r.jsx)(z.E,{className:"h-4 w-24"})]})]})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"hidden lg:flex justify-end mb-6",children:(0,r.jsx)(z.E,{className:"h-10 w-[200px] rounded-lg"})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(z.E,{className:"h-5 w-48"})}),(0,r.jsx)(V.Vp,{count:9})]})]})}var T=a(97301),U=a(62523),$=a(34108),q=a(21071),Z=a(41477),I=a(83737),O=a(63626);let W=t.memo(function(e){let{product:s}=e,{t:a}=(0,q.c)(),t=(0,I.A)();return(0,r.jsx)(c(),{href:"/product/".concat(s.slug,"/").concat(s.id),children:(0,r.jsxs)(u.Zp,{className:"h-full overflow-hidden transition-all hover:scale-105 border-2 border-transparent hover:border-primary/20 rounded-xl",children:[(0,r.jsxs)("div",{className:"relative",children:[s.discount>0&&(0,r.jsxs)(h.E,{className:"absolute top-2 right-2 z-10 rounded-full font-bold",children:["-",s.discount,"%"]}),(0,r.jsx)(T.X,{product:s,width:300,height:300,className:"w-full h-48 object-cover"})]}),(0,r.jsx)(u.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-medium line-clamp-2",children:s.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-primary",children:t(s.currentPrice,s.currency)}),s.discount>0&&(0,r.jsx)("span",{className:"text-sm text-muted-foreground line-through",children:t(s.originalPrice,s.currency)})]}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:!1===s.inStock?(0,r.jsx)("span",{className:"text-red-600",children:a("retailer.out_of_stock")}):(0,r.jsxs)(r.Fragment,{children:[a("product.best_price_at")," ",(0,r.jsx)("span",{className:"font-medium",children:s.retailer.name})]})})]})}),(0,r.jsxs)(u.wL,{className:"p-4 pt-0 flex justify-between items-center",children:[(0,r.jsx)(h.E,{variant:"outline",className:"rounded-full",children:s.category}),(0,r.jsx)("div",{className:"bg-primary/10 p-1 rounded-full",children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-primary"})})]})]})})},function(e,s){let a=e.product,r=s.product;return a.id===r.id});function B(){let{t:e}=(0,q.c)(),s=(0,l.useSearchParams)(),a=(0,l.useRouter)(),{currentCurrency:i}=(0,O.H)(),{currentCountries:n}=(0,Z.S)(),u=(0,I.A)(),[h,x]=(0,t.useState)([]),[f,p]=(0,t.useState)(!0),[g,j]=(0,t.useState)(""),[w,y]=(0,t.useState)("relevance"),[E,C]=(0,t.useState)([0,1500]),[_,R]=(0,t.useState)([0,1500]),[z,V]=(0,t.useState)([]),[T,B]=(0,t.useState)([]),[J,H]=(0,t.useState)(!1),X=(0,t.useRef)(!1),[Y,D]=(0,t.useState)(!1),G=(0,t.useRef)(new Map),[Q,K]=(0,t.useState)([]),[ee,es]=(0,t.useState)(null),[ea,er]=(0,t.useState)(!1),[et,el]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!U.Ro)return;let e=!1;return(async()=>{try{p(!0);let s=await fetch("/data/search/manifest.json");if(!s.ok)throw Error("Failed to load search manifest");let a=await s.json();window.searchTotalFiles=a.files.length,window.searchManifestLoaded=!0,window.searchFilesLoaded=0;let r=new $.Index({tokenize:"forward",cache:!0});for(let s of(G.current.forEach(e=>{let s=[e.name,e.category,e.barcode,e.slug,e.retailerName].join(" ");r.add(e.id,s)}),a.files)){if(e)break;let a=await fetch("/data/search/".concat(s));if(!a.ok){console.error("Failed to load /data/search/".concat(s));continue}for(let e of(await a.json()).products)if(!G.current.has(e.id)){G.current.set(e.id,e);let s=[e.name,e.category,e.barcode,e.slug,e.retailerName].join(" ");r.add(e.id,s)}window.searchFilesLoaded=(window.searchFilesLoaded||0)+1,window.searchFilesLoaded>=window.searchTotalFiles&&el(!0),K(Array.from(G.current.values())),es(r)}}catch(e){console.error("Error loading incremental static products:",e),el(!0)}finally{p(!1)}})(),()=>{e=!0}},[]),(0,t.useEffect)(()=>{U.Ro&&(window.searchManifestLoaded=window.searchManifestLoaded||!1,window.searchFilesLoaded=window.searchFilesLoaded||0,window.searchTotalFiles=window.searchTotalFiles||0)},[]),(0,t.useEffect)(()=>{let e=setTimeout(()=>{R(E)},300);return()=>clearTimeout(e)},[E]),(0,t.useEffect)(()=>{if(X.current)return;let e=s.get("q")||"",a=Number.parseFloat(s.get("minPrice")||"0"),r=Number.parseFloat(s.get("maxPrice")||"1500"),t=s.getAll("category"),l=s.getAll("retailer"),i="true"===s.get("discountOnly"),c=s.get("sort")||"relevance";j(e),C([a,r]),R([a,r]),V(t),B(l),H(i),y(c),X.current=!0,D(!0)},[s]),(0,t.useEffect)(()=>{if(!X.current)return;let e=new URLSearchParams;g&&e.set("q",g),_[0]>0&&e.set("minPrice",_[0].toString()),_[1]<1500&&e.set("maxPrice",_[1].toString()),z.forEach(s=>e.append("category",s)),T.forEach(s=>e.append("retailer",s)),J&&e.set("discountOnly","true"),"relevance"!==w&&e.set("sort",w),a.replace("/search?".concat(e.toString()))},[g,w,_,z,T,J,a]);let ei=t.useCallback(async()=>{p(!0);try{let e=[];if(U.Ro){if(!Q||0===Q.length){x([]),p(!1);return}let s=n.map(e=>e.id);if(e=(e=Q.filter(e=>{var a;return null===(a=e.retailerPrices)||void 0===a?void 0:a.some(e=>s.includes(e.countryId))})).map(e=>{var a;let r=e.retailerPrices.filter(e=>s.includes(e.countryId)),t=r.reduce((e,s)=>s.price<e.price?s:e,r[0]),l=e.productMSRPs?Math.min(...e.productMSRPs.map(e=>e.price)):0,i=(null==t?void 0:t.price)||l;return{...e,retailerPrices:r,currentPrice:i,originalPrice:l,currency:null==t?void 0:t.currency,countryCode:null===(a=n.find(e=>e.id===(null==t?void 0:t.countryId)))||void 0===a?void 0:a.code,retailer:null==t?void 0:t.retailer,discount:l>0?Math.round((l-i)/l*100):0}}),g&&ee){let s=ee.search(g);e=e.filter(e=>s.includes(e.id))}J&&(e=e.filter(e=>e.discount>0)),e=e.filter(e=>e.currentPrice>=_[0]&&e.currentPrice<=_[1]),z.length>0&&(e=e.filter(e=>z.includes(e.category))),T.length>0&&(e=e.filter(e=>T.includes(e.retailer)))}else{let s=new URLSearchParams;g&&s.set("q",g),_[0]>0&&s.set("minPrice",_[0].toString()),_[1]<1500&&s.set("maxPrice",_[1].toString()),z.forEach(e=>s.append("category",e)),T.forEach(e=>s.append("retailer",e)),J&&s.set("discountOnly","true"),"relevance"!==w&&s.set("sort",w),n&&s.set("countryCodes",n.map(e=>e.code).join(","));let a=await fetch("/api/search?".concat(s.toString()));if(!a.ok){console.error("Search fetch failed",await a.text()),x([]),p(!1),el(!0);return}e=(await a.json()||{data:[]}).data}switch(w){case"price-low-high":e.sort((e,s)=>e.inStock&&!s.inStock?-1:!e.inStock&&s.inStock?1:e.currentPrice-s.currentPrice);break;case"price-high-low":e.sort((e,s)=>e.inStock&&!s.inStock?-1:!e.inStock&&s.inStock?1:s.currentPrice-e.currentPrice);break;case"discount":e.sort((e,s)=>e.inStock&&!s.inStock?-1:!e.inStock&&s.inStock?1:(s.discount||0)-(e.discount||0));break;case"rating":e.sort((e,s)=>e.inStock&&!s.inStock?-1:!e.inStock&&s.inStock?1:(s.rating||0)-(e.rating||0));break;default:e.sort((e,s)=>e.inStock&&!s.inStock?-1:!e.inStock&&s.inStock?1:0)}x(e)}catch(e){console.error("Search fetch failed",e),x([])}finally{p(!1),U.Ro?window.searchManifestLoaded&&window.searchFilesLoaded>=window.searchTotalFiles&&el(!0):el(!0)}},[Q,ee,g,w,_,z,T,J,n]);(0,t.useEffect)(()=>{Y&&ei()},[Y,ei,g,w,_,z,T,J,n,Q]);let ec=e=>{V(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},en=e=>{B(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},ed=()=>{V([]),B([]),C([0,1500]),R([0,1500]),H(!1),y("relevance")},eo=Array.from(new Set(h.map(e=>e.category))).filter(Boolean),em=Array.from(new Set(h.map(e=>{var s;return null===(s=e.retailer)||void 0===s?void 0:s.name}))).filter(Boolean);return(0,r.jsxs)("div",{className:"container px-6 md:px-10 py-8 md:py-12",children:[(0,r.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.A,{className:"h-8 w-8 mr-3 text-primary"}),(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold",children:e("searchPage.heading")})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:g?"".concat(h.length," ").concat(e("searchPage.results_for"),' "').concat(g,'"'):e("searchPage.results_all",{count:h.length})})]}),f?(0,r.jsx)(M,{}):(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)("div",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,r.jsxs)("div",{className:"sticky top-24 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:e("searchPage.filters.title")}),(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:ed,className:"h-8 text-xs",children:e("searchPage.filters.clear_all")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:e("searchPage.filters.price_range")}),(0,r.jsxs)("div",{className:"px-2",children:[(0,r.jsx)(F,{value:E,min:0,max:1500,step:10,onValueChange:e=>C(e),className:"mb-6"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e("searchPage.filters.min_price")}),(0,r.jsx)("span",{className:"font-medium",children:u(E[0],i.code)})]}),(0,r.jsxs)("div",{className:"flex flex-col text-right",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e("searchPage.filters.max_price")}),(0,r.jsx)("span",{className:"font-medium",children:u(E[1],i.code)})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:e("searchPage.filters.categories")}),(0,r.jsx)("div",{className:"space-y-2",children:eo.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"category-".concat(e),checked:z.includes(e),onCheckedChange:()=>ec(e)}),(0,r.jsx)(L,{htmlFor:"category-".concat(e),className:"text-sm cursor-pointer",children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:e("searchPage.filters.retailers")}),(0,r.jsx)("div",{className:"space-y-2",children:em.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"retailer-".concat(e),checked:T.includes(e),onCheckedChange:()=>en(e)}),(0,r.jsx)(L,{htmlFor:"retailer-".concat(e),className:"text-sm cursor-pointer",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"discounted-only",checked:J,onCheckedChange:e=>H(!!e)}),(0,r.jsx)(L,{htmlFor:"discounted-only",className:"text-sm cursor-pointer",children:e("searchPage.filters.on_sale_only")})]})]})}),(0,r.jsxs)("div",{className:"lg:hidden flex justify-between items-center mb-4",children:[(0,r.jsxs)(A.cj,{open:ea,onOpenChange:er,children:[(0,r.jsx)(A.CG,{asChild:!0,children:(0,r.jsxs)(m.$,{variant:"outline",size:"sm",className:"flex items-center gap-2 rounded-lg",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e("searchPage.filters.title")})]})}),(0,r.jsxs)(A.h,{side:"left",className:"w-[300px] sm:w-[400px]",children:[(0,r.jsx)(A.Fm,{children:(0,r.jsx)(A.qp,{children:e("searchPage.filters.title")})}),(0,r.jsxs)("div",{className:"py-4 space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(m.$,{variant:"ghost",size:"sm",onClick:ed,className:"h-8 text-xs",children:e("searchPage.filters.clear_all")})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:e("searchPage.filters.price_range")}),(0,r.jsxs)("div",{className:"px-2",children:[(0,r.jsx)(F,{value:E,min:0,max:1500,step:10,onValueChange:e=>C(e)}),(0,r.jsxs)("div",{className:"flex justify-between mt-2 text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:e("searchPage.filters.min_price")}),(0,r.jsx)("span",{children:e("searchPage.filters.max_price")})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:e("searchPage.filters.categories")}),(0,r.jsx)("div",{className:"space-y-2",children:eo.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"mobile-category-".concat(e),checked:z.includes(e),onCheckedChange:()=>ec(e)}),(0,r.jsx)(L,{htmlFor:"mobile-category-".concat(e),className:"text-sm cursor-pointer",children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:e("searchPage.filters.retailers")}),(0,r.jsx)("div",{className:"space-y-2",children:em.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"mobile-retailer-".concat(e),checked:T.includes(e),onCheckedChange:()=>en(e)}),(0,r.jsx)(L,{htmlFor:"mobile-retailer-".concat(e),className:"text-sm cursor-pointer",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"mobile-discounted-only",checked:J,onCheckedChange:e=>H(!!e)}),(0,r.jsx)(L,{htmlFor:"mobile-discounted-only",className:"text-sm cursor-pointer",children:e("searchPage.filters.on_sale_only")})]})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(m.$,{className:"w-full rounded-full",onClick:()=>er(!1),children:e("searchPage.filters.apply")})})]})]})]}),(0,r.jsxs)(N,{value:w,onValueChange:y,children:[(0,r.jsx)(b,{className:"w-[180px] rounded-lg",children:(0,r.jsx)(v,{placeholder:e("searchPage.sort.placeholder")})}),(0,r.jsxs)(k,{children:[(0,r.jsx)(P,{value:"relevance",children:e("searchPage.sort.relevance")}),(0,r.jsx)(P,{value:"availability",children:e("searchPage.sort.availability")}),(0,r.jsx)(P,{value:"price-low-high",children:e("searchPage.sort.price_low_to_high")}),(0,r.jsx)(P,{value:"price-high-low",children:e("searchPage.sort.price_high_to_low")}),(0,r.jsx)(P,{value:"discount",children:e("searchPage.sort.discount")}),(0,r.jsx)(P,{value:"rating",children:e("searchPage.sort.rating")})]})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"hidden lg:flex justify-end mb-6",children:(0,r.jsxs)(N,{value:w,onValueChange:y,children:[(0,r.jsx)(b,{className:"w-[200px] rounded-lg",children:(0,r.jsx)(v,{placeholder:e("searchPage.sort.placeholder")})}),(0,r.jsxs)(k,{children:[(0,r.jsx)(P,{value:"relevance",children:e("searchPage.sort.relevance")}),(0,r.jsx)(P,{value:"availability",children:e("searchPage.sort.availability")}),(0,r.jsx)(P,{value:"price-low-high",children:e("searchPage.sort.price_low_to_high")}),(0,r.jsx)(P,{value:"price-high-low",children:e("searchPage.sort.price_high_to_low")}),(0,r.jsx)(P,{value:"discount",children:e("searchPage.sort.discount")}),(0,r.jsx)(P,{value:"rating",children:e("searchPage.sort.rating")})]})]})}),h.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6",children:g?(0,r.jsxs)("p",{className:"text-muted-foreground",children:[h.length," ",e("searchPage.results_for"),' "',g,'"']}):(0,r.jsx)("p",{className:"text-muted-foreground",children:e("searchPage.results_all",{count:h.length})})}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,r.jsx)(W,{product:e},e.id))})]}):et?g?(0,r.jsx)("div",{className:"bg-muted/30 rounded-xl p-12 text-center",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,r.jsx)("div",{className:"bg-primary/10 h-20 w-20 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(d.A,{className:"h-10 w-10 text-primary"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:e("searchPage.no_results.title")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e("searchPage.no_results.message",{query:g})}),(0,r.jsx)(m.$,{asChild:!0,className:"rounded-full",children:(0,r.jsx)(c(),{href:"/blog",children:e("searchPage.check_blog")})})]})}):(0,r.jsx)("div",{className:"bg-muted/30 rounded-xl p-12 text-center",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,r.jsx)("div",{className:"bg-primary/10 h-20 w-20 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(d.A,{className:"h-10 w-10 text-primary"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:e("searchPage.empty_query.title")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e("searchPage.empty_query.message")}),(0,r.jsx)(m.$,{asChild:!0,className:"rounded-full",children:(0,r.jsx)(c(),{href:"/blog",children:e("searchPage.check_blog")})})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"space-y-4 text-center",children:[(0,r.jsxs)("div",{className:"animate-pulse flex space-x-2 justify-center",children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-primary rounded-full"}),(0,r.jsx)("div",{className:"h-2 w-2 bg-primary rounded-full"}),(0,r.jsx)("div",{className:"h-2 w-2 bg-primary rounded-full"})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e("searchPage.still_searching")})]})})]})]})]})}W.displayName="SearchResultItem"}},e=>{var s=s=>e(e.s=s);e.O(0,[5034,4921,9749,1509,8899,7205,3026,8441,1517,7358],()=>s(70343)),_N_E=e.O()}]);